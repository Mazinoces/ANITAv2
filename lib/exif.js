/*
//══════════════════════════════════════════════════════════════════════════════════════════════════════//
//                                                                                                      //
//                                ＷＨＡＴＳＡＰＰ ＢＯＴ－ＭＤ                                             // 
//                                                                                                      // 
//                                         Ｖ：１．０                                                    // 
//                                                                                                      // 
//                                                                                                      //
//         ██████ ██    ██  ██████  ███    ██ ██    ██ ███████       ██████   ██████  ████████          //
//        ██       ██  ██  ██       ████   ██ ██    ██ ██            ██   ██ ██    ██    ██             //
//        ██        ████   ██   ███ ██ ██  ██ ██    ██ ███████ █████ ██████  ██    ██    ██             //   
//        ██         ██    ██    ██ ██  ██ ██ ██    ██      ██       ██   ██ ██    ██    ██             //  
//         ██████    ██     ██████  ██   ████  ██████  ███████       ██████   ██████     ██             //  
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//                                                                                                      //
//══════════════════════════════════════════════════════════════════════════════════════════════════════//

*
   * @project_name : CYGNUS-BOTv2
   * @author : CODERXSA
   * @youtube : https://www.youtube.com/@coderxsa
   * @instagram : https://www.instagram.com/coderx.sa
   * @description : My Private build i made public for everone to use and easy hosting.
   * @version : 1.0
   * Donation : https://pay.yoco.com/coderx
   
   * For all my GitHub bots, I typically only check and update them when I have the time. My primary focus is on my main bots.
*
   * Licensed under the  GPL-3.0 License;
* 
   * Created By CODERX.
   * © 2024 CYGNUS-BOTv2.
*/



//══════════════════════════════════════════════════════════════════════════════════════════════════════//

const _0x3c791c=_0x4e28;(function(_0x43d002,_0x29d9e9){const _0x52aaad=_0x4e28,_0x571e0a=_0x43d002();while(!![]){try{const _0x3fe99b=-parseInt(_0x52aaad(0x1e5))/0x1*(parseInt(_0x52aaad(0x209))/0x2)+-parseInt(_0x52aaad(0x1fb))/0x3+parseInt(_0x52aaad(0x1db))/0x4+parseInt(_0x52aaad(0x210))/0x5*(parseInt(_0x52aaad(0x1f5))/0x6)+parseInt(_0x52aaad(0x1ca))/0x7*(parseInt(_0x52aaad(0x203))/0x8)+parseInt(_0x52aaad(0x216))/0x9+parseInt(_0x52aaad(0x1c7))/0xa;if(_0x3fe99b===_0x29d9e9)break;else _0x571e0a['push'](_0x571e0a['shift']());}catch(_0x1c168f){_0x571e0a['push'](_0x571e0a['shift']());}}}(_0x571e,0x347b6));const ffmpeg=require('fluent-ffmpeg'),{randomBytes}=require(_0x3c791c(0x1e3)),fs=require('fs'),{getHttpStream,toBuffer}=require(_0x3c791c(0x1cb)),sharp=require(_0x3c791c(0x20a)),{spawn}=require(_0x3c791c(0x1eb)),path=require(_0x3c791c(0x214)),{fromBuffer}=require('file-type'),{tmpdir}=require('os'),ff=require(_0x3c791c(0x20b)),webp=require(_0x3c791c(0x206));async function toGif(_0x37ccaf){const _0x25985b=_0x3c791c;try{const _0x351c9c='./'+randomBytes(0x3)[_0x25985b(0x1da)](_0x25985b(0x201))+_0x25985b(0x1e7),_0x29b98e='./'+randomBytes(0x3)[_0x25985b(0x1da)](_0x25985b(0x201))+'.gif';fs[_0x25985b(0x1ea)](_0x351c9c,_0x37ccaf['toString'](_0x25985b(0x1e8)),'binary');const _0x9de8b6=await new Promise(_0x209ebc=>{const _0x4cb350=_0x25985b;spawn('convert',[_0x351c9c,_0x29b98e])['on']('error',_0x27e71c=>{throw _0x27e71c;})['on'](_0x4cb350(0x1f1),()=>_0x209ebc(_0x29b98e));});let _0x520562=fs['readFileSync'](_0x9de8b6);try{fs['unlinkSync'](_0x351c9c);}catch{}try{fs[_0x25985b(0x1cc)](_0x29b98e);}catch{}return _0x520562;}catch(_0x233766){console[_0x25985b(0x1f8)](_0x233766);}}async function toMp4(_0x1f9aa8){const _0x51b78e=_0x3c791c;try{let _0x57181c='./'+randomBytes(0x3)[_0x51b78e(0x1da)](_0x51b78e(0x201))+_0x51b78e(0x1d3);const _0x5538a0=fs[_0x51b78e(0x1fd)](_0x1f9aa8)?_0x1f9aa8:save(_0x1f9aa8,_0x57181c),_0x19f698='./'+randomBytes(0x3)[_0x51b78e(0x1da)]('hex')+_0x51b78e(0x1d2),_0xc6dbe3=await new Promise(_0xc2fcc9=>{const _0x214c85=_0x51b78e;ffmpeg(_0x5538a0)[_0x214c85(0x1c9)](['-pix_fmt\x20yuv420p',_0x214c85(0x1fe),_0x214c85(0x213),'-filter:v\x20crop=\x27floor(in_w/2)*2:floor(in_h/2)*2\x27'])['toFormat'](_0x214c85(0x1ed))['noAudio']()['save'](_0x19f698)['on']('exit',()=>_0xc2fcc9(_0x19f698));});let _0x4583d9=await fs['promises'][_0x51b78e(0x1ee)](_0xc6dbe3);try{fs['unlinkSync'](_0x5538a0);}catch{}try{fs['unlinkSync'](_0x19f698);}catch{}return _0x4583d9;}catch(_0x2e71fa){console[_0x51b78e(0x1f8)](_0x2e71fa);}}const EightD=async _0x4dcd=>{const _0x191df8=_0x3c791c,_0x4af575='./assets/'+randomBytes(0x3)['toString'](_0x191df8(0x201))+_0x191df8(0x20f);_0x4dcd=Buffer['isBuffer'](_0x4dcd)?save(_0x4dcd,_0x4af575):_0x4dcd;const _0x2ec4a1='./assets/'+randomBytes(0x3)['toString'](_0x191df8(0x201))+'.mp3',_0x309c07=await new Promise(_0x7d364e=>{const _0x16a8b4=_0x191df8;ffmpeg(_0x4dcd)['audioFilter']([_0x16a8b4(0x1d9)])[_0x16a8b4(0x1f6)](0xac44)['audioChannels'](0x2)[_0x16a8b4(0x1f3)](_0x16a8b4(0x1d5))['audioCodec'](_0x16a8b4(0x1d8))[_0x16a8b4(0x1c4)](0x5)[_0x16a8b4(0x1f4)]('mp3')[_0x16a8b4(0x1e4)](_0x2ec4a1)['on'](_0x16a8b4(0x1c8),()=>_0x7d364e(_0x2ec4a1));});return _0x309c07;};function _0x4e28(_0x54fd6b,_0x4d4e63){const _0x571ef7=_0x571e();return _0x4e28=function(_0x4e286a,_0x51d155){_0x4e286a=_0x4e286a-0x1c4;let _0x3e3144=_0x571ef7[_0x4e286a];return _0x3e3144;},_0x4e28(_0x54fd6b,_0x4d4e63);}function save(_0xc1f16f,_0x26b46e=_0x3c791c(0x1d6)){const _0x3a8c42=_0x3c791c;try{return fs[_0x3a8c42(0x1ea)](_0x26b46e,_0xc1f16f['toString']('binary'),_0x3a8c42(0x1e8)),_0x26b46e;}catch(_0x56dfc5){console['log'](_0x56dfc5);}}function _0x571e(){const _0x546bc9=['./assets/saveFile.jpg','-an','libmp3lame','apulsator=hz=0.125','toString','1587640GqxxgI','-vcodec','exports','-ss','promises','resize','addOutputOptions','writeUIntLE','crypto','save','710OMrtfm','concat','.webp','binary','stringify','writeFileSync','child_process','-loop','mp4','readFile','buffer','webp','exit','-preset','audioBitrate','toFormat','79824ONZseT','audioFrequency','utf-8','log','join','readFileSync','132261AjChLk','readUIntLE','existsSync','-c:v\x20libx264','default','00:00:00','hex','exif','8XZCjOw','-vf','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','node-webpmux','from','error','1028BWlxNh','sharp','fluent-ffmpeg','unlink','toBuffer','packname','.mp3','20wsJfcD','categories','Input\x20is\x20not\x20a\x20Buffer','-movflags\x20+faststart','path','load','1096983hYsXHC','audioQuality','Image','isBuffer','236200matuHD','end','outputOptions','198520ohSKVj','@whiskeysockets/baileys','unlinkSync','libwebp','length','author','00:00:05','ANITA','.mp4','.gif','contain','128k'];_0x571e=function(){return _0x546bc9;};return _0x571e();}const resizeImage=(_0x3cec2b,_0x24ff82,_0x244591)=>{const _0x3e6e53=_0x3c791c;if(!Buffer['isBuffer'](_0x3cec2b))throw _0x3e6e53(0x212);return new Promise(async _0x27a3ad=>{const _0x355ecc=_0x3e6e53;sharp(_0x3cec2b)[_0x355ecc(0x1e0)](_0x24ff82,_0x244591,{'fit':_0x355ecc(0x1d4)})[_0x355ecc(0x20d)]()['then'](_0x27a3ad);});},_parseInput=async(_0x3b0d31,_0x6c58dc=![],_0x2f2e38='path')=>{const _0x326090=_0x3c791c,_0x535b6b=await toBuffer(await getHttpStream(_0x3b0d31)),_0x599ab5='./assets/file_'+randomBytes(0x3)['toString'](_0x326090(0x201))+'.'+(_0x6c58dc?_0x6c58dc:(await fromBuffer(_0x535b6b))['ext']),_0x2001c4=Buffer[_0x326090(0x1c6)](_0x3b0d31)?save(_0x3b0d31,_0x599ab5):fs[_0x326090(0x1fd)](_0x3b0d31)?_0x3b0d31:_0x3b0d31;if(_0x2f2e38==_0x326090(0x214))return _0x2001c4;else{if(_0x2f2e38==_0x326090(0x1ef)){const _0x2f29ee=await fs[_0x326090(0x1df)][_0x326090(0x1ee)](_0x2001c4);try{await fs[_0x326090(0x1df)][_0x326090(0x20c)](_0x2001c4);}catch(_0x24d475){}return _0x2f29ee;}}};async function imageToWebp(_0x4fa9ee){const _0x445d82=_0x3c791c,_0x4d1a12=path[_0x445d82(0x1f9)](tmpdir(),randomBytes(0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x445d82(0x1e7)),_0x8d75a2=path[_0x445d82(0x1f9)](tmpdir(),randomBytes(0x6)[_0x445d82(0x1fc)](0x0,0x6)[_0x445d82(0x1da)](0x24)+'.jpg');fs[_0x445d82(0x1ea)](_0x8d75a2,_0x4fa9ee),await new Promise((_0x5c9ff2,_0xd4927b)=>{const _0x10fb29=_0x445d82;ff(_0x8d75a2)['on'](_0x10fb29(0x208),_0xd4927b)['on'](_0x10fb29(0x1c8),()=>_0x5c9ff2(!![]))['addOutputOptions'](['-vcodec',_0x10fb29(0x1cd),_0x10fb29(0x204),_0x10fb29(0x205)])[_0x10fb29(0x1f4)](_0x10fb29(0x1f0))[_0x10fb29(0x1e4)](_0x4d1a12);});const _0x40de14=fs[_0x445d82(0x1fa)](_0x4d1a12);return fs[_0x445d82(0x1cc)](_0x4d1a12),fs['unlinkSync'](_0x8d75a2),_0x40de14;}async function videoToWebp(_0x1ac447){const _0x3a9eea=_0x3c791c,_0x33f895=path[_0x3a9eea(0x1f9)](tmpdir(),randomBytes(0x6)[_0x3a9eea(0x1fc)](0x0,0x6)['toString'](0x24)+_0x3a9eea(0x1e7)),_0x51e70f=path['join'](tmpdir(),randomBytes(0x6)[_0x3a9eea(0x1fc)](0x0,0x6)[_0x3a9eea(0x1da)](0x24)+_0x3a9eea(0x1d2));fs[_0x3a9eea(0x1ea)](_0x51e70f,_0x1ac447),await new Promise((_0xbbebbb,_0x58bfdb)=>{const _0x32aea0=_0x3a9eea;ff(_0x51e70f)['on'](_0x32aea0(0x208),_0x58bfdb)['on'](_0x32aea0(0x1c8),()=>_0xbbebbb(!![]))[_0x32aea0(0x1e1)]([_0x32aea0(0x1dc),_0x32aea0(0x1cd),'-vf',_0x32aea0(0x205),_0x32aea0(0x1ec),'0',_0x32aea0(0x1de),_0x32aea0(0x200),'-t',_0x32aea0(0x1d0),_0x32aea0(0x1f2),_0x32aea0(0x1ff),_0x32aea0(0x1d7),'-vsync','0'])[_0x32aea0(0x1f4)](_0x32aea0(0x1f0))['save'](_0x33f895);});const _0x58a2d4=fs[_0x3a9eea(0x1fa)](_0x33f895);return fs[_0x3a9eea(0x1cc)](_0x33f895),fs[_0x3a9eea(0x1cc)](_0x51e70f),_0x58a2d4;}async function writeExifImg(_0x5571a2,_0x535b8a){const _0x4dbf59=_0x3c791c;let _0x5b4f33=await imageToWebp(_0x5571a2);const _0x4f5bff=path['join'](tmpdir(),randomBytes(0x6)[_0x4dbf59(0x1fc)](0x0,0x6)[_0x4dbf59(0x1da)](0x24)+'.webp'),_0x2738ce=path[_0x4dbf59(0x1f9)](tmpdir(),randomBytes(0x6)[_0x4dbf59(0x1fc)](0x0,0x6)['toString'](0x24)+_0x4dbf59(0x1e7));fs[_0x4dbf59(0x1ea)](_0x4f5bff,_0x5b4f33);if(_0x535b8a[_0x4dbf59(0x20e)]||_0x535b8a[_0x4dbf59(0x1cf)]){const _0x246b97=new webp[(_0x4dbf59(0x1c5))](),_0x11dd3c={'sticker-pack-id':'ANITA','sticker-pack-name':_0x535b8a['packname'],'sticker-pack-publisher':_0x535b8a[_0x4dbf59(0x1cf)],'emojis':_0x535b8a[_0x4dbf59(0x211)]?_0x535b8a[_0x4dbf59(0x211)]:['']},_0x5171ff=Buffer[_0x4dbf59(0x207)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1e5833=Buffer[_0x4dbf59(0x207)](JSON[_0x4dbf59(0x1e9)](_0x11dd3c),_0x4dbf59(0x1f7)),_0x210554=Buffer['concat']([_0x5171ff,_0x1e5833]);return _0x210554[_0x4dbf59(0x1e2)](_0x1e5833[_0x4dbf59(0x1ce)],0xe,0x4),await _0x246b97[_0x4dbf59(0x215)](_0x4f5bff),fs['unlinkSync'](_0x4f5bff),_0x246b97[_0x4dbf59(0x202)]=_0x210554,await _0x246b97['save'](_0x2738ce),_0x2738ce;}}async function writeExifVid(_0x49d004,_0x165bf0){const _0x1795e6=_0x3c791c;let _0x4fce57=await videoToWebp(_0x49d004);const _0xbcb998=path['join'](tmpdir(),randomBytes(0x6)[_0x1795e6(0x1fc)](0x0,0x6)[_0x1795e6(0x1da)](0x24)+_0x1795e6(0x1e7)),_0x2727af=path[_0x1795e6(0x1f9)](tmpdir(),randomBytes(0x6)[_0x1795e6(0x1fc)](0x0,0x6)[_0x1795e6(0x1da)](0x24)+_0x1795e6(0x1e7));fs[_0x1795e6(0x1ea)](_0xbcb998,_0x4fce57);let _0x294a10,_0x4b6596;try{_0x294a10=_0x165bf0[_0x1795e6(0x20e)];}catch(_0x2d0290){_0x294a10=_0x1795e6(0x1d1);}try{_0x4b6596=_0x165bf0[_0x1795e6(0x1cf)];}catch(_0x55f004){_0x4b6596='';}const _0x33a42d=new webp[(_0x1795e6(0x1c5))](),_0x42b534={'sticker-pack-id':_0x1795e6(0x1d1),'sticker-pack-name':_0x294a10,'sticker-pack-publisher':_0x4b6596,'emojis':_0x165bf0[_0x1795e6(0x211)]?_0x165bf0['categories']:['']},_0x324813=Buffer[_0x1795e6(0x207)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x379210=Buffer[_0x1795e6(0x207)](JSON['stringify'](_0x42b534),_0x1795e6(0x1f7)),_0x12dfdb=Buffer[_0x1795e6(0x1e6)]([_0x324813,_0x379210]);return _0x12dfdb['writeUIntLE'](_0x379210[_0x1795e6(0x1ce)],0xe,0x4),await _0x33a42d[_0x1795e6(0x215)](_0xbcb998),fs['unlinkSync'](_0xbcb998),_0x33a42d[_0x1795e6(0x202)]=_0x12dfdb,await _0x33a42d[_0x1795e6(0x1e4)](_0x2727af),_0x2727af;}async function writeExifWebp(_0x2ec70c,_0x12ae7f){const _0x404f0c=_0x3c791c,_0xa62af1=path['join'](tmpdir(),randomBytes(0x6)['readUIntLE'](0x0,0x6)[_0x404f0c(0x1da)](0x24)+_0x404f0c(0x1e7)),_0xb045c6=path['join'](tmpdir(),randomBytes(0x6)[_0x404f0c(0x1fc)](0x0,0x6)[_0x404f0c(0x1da)](0x24)+_0x404f0c(0x1e7));fs[_0x404f0c(0x1ea)](_0xa62af1,_0x2ec70c);if(_0x12ae7f['packname']||_0x12ae7f[_0x404f0c(0x1cf)]){const _0x51dc53=new webp[(_0x404f0c(0x1c5))](),_0x5a023b={'sticker-pack-id':'Asta_Md','sticker-pack-name':_0x12ae7f['packname'],'sticker-pack-publisher':_0x12ae7f[_0x404f0c(0x1cf)],'emojis':_0x12ae7f['categories']?_0x12ae7f['categories']:['']},_0x450b27=await Buffer[_0x404f0c(0x207)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x368c6b=await Buffer[_0x404f0c(0x207)](JSON[_0x404f0c(0x1e9)](_0x5a023b),_0x404f0c(0x1f7)),_0x2534ff=await Buffer[_0x404f0c(0x1e6)]([_0x450b27,_0x368c6b]);return await _0x2534ff[_0x404f0c(0x1e2)](_0x368c6b[_0x404f0c(0x1ce)],0xe,0x4),await _0x51dc53[_0x404f0c(0x215)](_0xa62af1),fs[_0x404f0c(0x1cc)](_0xa62af1),_0x51dc53[_0x404f0c(0x202)]=_0x2534ff,await _0x51dc53[_0x404f0c(0x1e4)](_0xb045c6),_0xb045c6;}}module[_0x3c791c(0x1dd)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExifWebp':writeExifWebp,'toGif':toGif,'toMp4':toMp4,'EightD':EightD,'_parseInput':_parseInput,'resizeImage':resizeImage};
